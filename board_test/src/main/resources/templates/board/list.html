<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>게시판 리스트</title>
    <!-- 부트스트랩 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
</head>
<body>
    <div class="container">
        <!-- 게시글 작성 버튼 -->
        <div class="my-3">
            <a th:href="@{/writeForm}" class="btn btn-primary">게시글 작성</a>
            <a th:href="@{/cgfoods/new}" class="btn btn-primary">먹거리 등록</a>
            <a th:href="@{/cgproducts/new}" class="btn btn-primary">제품 등록</a>
            
        </div>

        <!-- 리스트 아이템 반복 -->
        <div th:each="dto : ${list}" class="container">
            <div class="row">
                <div class="col">
                    <ul class="list-group list-group-flush">
                        <hr>
                        <li class="list-group-item">
                            <div class="row pb-2">
                                <div class="col-1">
                                    <h1 class="display-6 text-primary" th:text="${dto.id}">ID</h1>
                                </div>
                                <div class="col-11">
                                    <div class="row h-100">
                                        <div class="col-12 col-md-8 d-flex align-items-center">
                                            <span th:text="${dto.writer} + ' 님의 '"></span>
                                            <a th:href="@{/view(id=${dto.id})}" th:text="${dto.title}">제목</a>
                                        </div>
                                        <div class="col-12 col-md-4 d-flex align-items-center justify-content-between">
                                            <span class="text-muted small">조회수 : <span th:text="${dto.b_hit}"></span></span>
                                            <span class="text-muted small" th:text="${dto.b_upd_date}"></span>
                                            <button class="btn btn-sm bg-dark text-white">
                                                <a th:href="@{/delete(id=${dto.id})}" class="text-white text-decoration-none">삭제</a>
                                            </button>
                                            <button class="btn btn-sm bg-dark text-white">
                                                <a th:href="@{/updateForm(id=${dto.id})}">수정</a>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- 페이지 네비게이션 -->
        <nav aria-label="Page navigation example">
            <ul class="pagination justify-content-center">
                <li th:classappend="${page > 1} ? '' : 'disabled'">
                    <a class="page-link" th:href="@{/list(page=${page - 1}, type=${type}, word=${word})}">Prev</a>
                </li>
                <li th:each="i : ${#numbers.sequence(startPage, endPage)}" th:classappend="${page == i} ? 'active' : ''">
                    <a class="page-link" th:href="@{/list(page=${i}, type=${type}, word=${word})}" th:text="${i}"></a>
                </li>
                <li th:classappend="${page < totalPage} ? '' : 'disabled'">
                    <a class="page-link" th:href="@{/list(page=${page + 1}, type=${type}, word=${word})}">Next</a>
                </li>
            </ul>
        </nav>
        
        <!-- 검색 폼 -->
        <div class="row">
            <div class="col-4 offset-4">
                <form th:action="@{/list}" method="get">
                    <div class="input-group">
                        <select name="type" class="form-select">
                            <option value="title">제목</option>
                            <option value="content">내용</option>
                            <option value="writer">작성자</option>
                        </select>
                        <input type="text" name="word" class="form-control" placeholder="검색어 입력">
                        <button type="submit" class="btn btn-primary">검색</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    </div>
    
    <!-- 부트스트랩 JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
